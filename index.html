<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Noor VPN</title>

<style>

body{
margin:0;
font-family:tahoma;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
color:#fff;
text-align:center;
}

.container{
max-width:520px;
margin:auto;
padding:20px;
}

.card{
background:rgba(255,255,255,0.05);
backdrop-filter:blur(10px);
padding:20px;
border-radius:18px;
margin-bottom:20px;
box-shadow:0 10px 30px rgba(0,0,0,0.3);
}

h2,h3{
margin-top:0;
}

button{
background:linear-gradient(45deg,#ff9800,#ff5722);
border:none;
color:white;
padding:14px;
border-radius:12px;
cursor:pointer;
margin-top:12px;
width:100%;
font-weight:bold;
font-size:15px;
transition:0.3s;
}

button:hover{
transform:scale(1.03);
}

.hidden{display:none;}

.plans-grid{
display:grid;
grid-template-columns:1fr 1fr;
gap:12px;
margin-top:15px;
}

.plan-card{
background:rgba(255,255,255,0.08);
padding:15px;
border-radius:14px;
cursor:pointer;
transition:0.3s;
border:2px solid transparent;
}

.plan-card:hover{
transform:translateY(-4px);
}

.plan-card.active{
border:2px solid #ff9800;
background:rgba(255,152,0,0.15);
}

.plan-size{
font-size:16px;
font-weight:bold;
margin-bottom:6px;
}

.plan-price{
font-size:14px;
opacity:0.9;
}

input{
width:100%;
padding:12px;
margin-top:10px;
border-radius:10px;
border:none;
font-size:14px;
}

hr{
border:0;
border-top:1px solid rgba(255,255,255,0.15);
margin:15px 0;
}

.small{
font-size:14px;
line-height:1.8;
opacity:0.9;
}
</style>
</head>
<body>

<div class="container">

<div id="home">
<div class="card">
<h2>ğŸš€ Ø®Ø±ÛŒØ¯ VPN Ù¾Ø±Ø³Ø±Ø¹Øª</h2>
<p class="small">Ø§ØªØµØ§Ù„ Ù¾Ø§ÛŒØ¯Ø§Ø± â€¢ Ø³Ø±Ø¹Øª Ø¨Ø§Ù„Ø§ â€¢ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø³Ø±ÛŒØ¹</p>
<button onclick="showPage('plans')">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ù„Ù†â€ŒÙ‡Ø§</button>
</div>
</div>

<div id="plans" class="hidden">
<div class="card">
<h3>Ø§Ù†ØªØ®Ø§Ø¨ Ù¾Ù„Ù† (ÛŒÚ©â€ŒÙ…Ø§Ù‡Ù‡)</h3>

<div class="plans-grid">

<div class="plan-card" onclick="selectPlan(this,'10 Ú¯ÛŒÚ¯','80000')">
<div class="plan-size">10 Ú¯ÛŒÚ¯</div>
<div class="plan-price">80,000 ØªÙˆÙ…Ø§Ù†</div>
</div>

<div class="plan-card" onclick="selectPlan(this,'20 Ú¯ÛŒÚ¯','120000')">
<div class="plan-size">20 Ú¯ÛŒÚ¯</div>
<div class="plan-price">120,000 ØªÙˆÙ…Ø§Ù†</div>
</div>

<div class="plan-card" onclick="selectPlan(this,'30 Ú¯ÛŒÚ¯','180000')">
<div class="plan-size">30 Ú¯ÛŒÚ¯</div>
<div class="plan-price">180,000 ØªÙˆÙ…Ø§Ù†</div>
</div>

<div class="plan-card" onclick="selectPlan(this,'50 Ú¯ÛŒÚ¯','300000')">
<div class="plan-size">50 Ú¯ÛŒÚ¯</div>
<div class="plan-price">300,000 ØªÙˆÙ…Ø§Ù†</div>
</div>

<div class="plan-card" onclick="selectPlan(this,'80 Ú¯ÛŒÚ¯','480000')">
<div class="plan-size">80 Ú¯ÛŒÚ¯</div>
<div class="plan-price">480,000 ØªÙˆÙ…Ø§Ù†</div>
</div>

<div class="plan-card" onclick="selectPlan(this,'100 Ú¯ÛŒÚ¯','540000')">
<div class="plan-size">100 Ú¯ÛŒÚ¯</div>
<div class="plan-price">540,000 ØªÙˆÙ…Ø§Ù†</div>
</div>

</div>

<button onclick="goToPayment()">Ø§Ø¯Ø§Ù…Ù‡</button>
<button onclick="showPage('home')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>

</div>
</div>

<div id="payment" class="hidden">
<div class="card">
<h3>Ù¾Ø±Ø¯Ø§Ø®Øª Ùˆ Ø§Ø±Ø³Ø§Ù„ ÙÛŒØ´</h3>

<div id="selectedPlan"></div>
<div style="margin-top:8px;">ğŸ’° Ù…Ø¨Ù„Øº: <strong id="priceBox"></strong></div>

<hr>

<div class="small">
ğŸ’³ Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª:<br>
<strong>6219 8618 5074 6008</strong><br>
Ø¨Ù‡ Ù†Ø§Ù…: <strong>Ø³Ø§Ù… Ø±Ù†Ø¬Ø¨Ø±</strong>
</div>

<hr>

<input type="text" id="telegramId" placeholder="Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… (@username)">
<input type="file" id="receipt" accept="image/*">

<button onclick="sendOrder()">Ø§Ø±Ø³Ø§Ù„ ÙÛŒØ´</button>
<button onclick="showPage('home')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>

</div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>

let selectedPlan="50 Ú¯ÛŒÚ¯";
let selectedPrice="300000";

const SUPABASE_URL="https://einiufpqfwwwomutlylu.supabase.co";
const SUPABASE_KEY="sb_publishable_tN0r-fIK19hTI6ucKPuvhA_5V8ueB9B";

const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

function showPage(id){
["home","plans","payment","about"].forEach(p=>{
let el=document.getElementById(p);
if(el) el.classList.add("hidden");
});
let target=document.getElementById(id);
if(target) target.classList.remove("hidden");
}

function selectPlan(element,plan,price){
document.querySelectorAll(".plan-card").forEach(c=>{
c.classList.remove("active");
});
element.classList.add("active");
selectedPlan=plan;
selectedPrice=price;
}

function goToPayment(){
document.getElementById("selectedPlan").innerText="Ù¾Ù„Ù† Ø§Ù†ØªØ®Ø§Ø¨ÛŒ: "+selectedPlan;
document.getElementById("priceBox").innerText=
Number(selectedPrice).toLocaleString("en-US")+" ØªÙˆÙ…Ø§Ù†";
showPage("payment");
}

async function sendOrder(){

let tg=document.getElementById("telegramId").value.trim();
let file=document.getElementById("receipt");

if(tg===""){ alert("Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"); return; }
if(!tg.startsWith("@")) tg="@"+tg;
if(file.files.length===0){ alert("Ø¹Ú©Ø³ ÙÛŒØ´ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯"); return; }

let receiptFile=file.files[0];
let fileName=Date.now()+"-"+receiptFile.name;

let {error:uploadError}=await supabaseClient
.storage.from("receipts")
.upload(fileName,receiptFile);

if(uploadError){
alert("Ø®Ø·Ø§ Ø¯Ø± Ø¢Ù¾Ù„ÙˆØ¯ Ø¹Ú©Ø³");
console.log(uploadError);
return;
}

let {data:publicUrlData}=supabaseClient
.storage.from("receipts")
.getPublicUrl(fileName);

let receiptUrl=publicUrlData.publicUrl;

let {error:insertError}=await supabaseClient
.from("orders")
.insert([{
plan:selectedPlan,
price:Number(selectedPrice).toLocaleString("en-US")+" ØªÙˆÙ…Ø§Ù†",
telegram_id:tg,
receipt_url:receiptUrl
}]);

if(insertError){
alert("Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´");
console.log(insertError);
return;
}

alert("Ø³ÙØ§Ø±Ø´ Ø«Ø¨Øª Ø´Ø¯ âœ…");
showPage("home");
}

function openSupport(){
window.open("https://t.me/noorrvpn","_blank");
}

</script>

</body>
</html>